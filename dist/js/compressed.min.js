var SongSearch=this.SongSearch||{};SongSearch.init=function(){$("#search-form input").keyup(function(){var n=$(this).val();n.length>2?(SongSearch.clearSuggestions(),SongSearch.getSongs(n)):0===n.length&&SongSearch.clearSuggestions()}),$("#search-form").submit(function(){var n=$(".search-suggestions li:first").text();return SongSearch.pickSuggestion(n),$("#search-form input").blur(),SongSearch.clearSuggestions(),!1})},SongSearch.getSongs=function(n){$.ajax({url:"https://api.spotify.com/v1/search",data:{q:n,type:"track",limit:5},success:function(n){n.tracks.items.forEach(SongSearch.showSuggestions)},error:function(){$("body").append("<p>No songs found.</p>")}})},SongSearch.showSuggestions=function(n){$(".search-suggestions").append("<li>"+n.name+"</li>"),$(".search-suggestions li").unbind().click(function(){SongSearch.pickSuggestion($(this).text())})},SongSearch.clearSuggestions=function(){$(".search-suggestions").empty()},SongSearch.pickSuggestion=function(n){$("#search-form input").val(n),SongSearch.printSongData(n),SongSearch.clearSuggestions()},SongSearch.printSongData=function(n){var e=new Date,a=e.toISOString().slice(0,10),s=e.getUTCHours(),t=e.getUTCMinutes();$(".search-results").append('<li><span class="track-title">'+n+'</span><span class="track-date-added">'+a+" "+s+":"+t+'</span><span class="track-remove"><i class="fa fa-times"></i></span></li>'),$(".track-remove").unbind().click(function(){SongSearch.removeSongData($(this))})},SongSearch.removeSongData=function(n){n.parents("li").remove()};
!function(){SongSearch.init()}();